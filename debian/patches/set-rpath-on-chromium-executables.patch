Description: set rpath on chromium-browser and v8_context_snapshot_generator executables so that they can locate libffmpeg.so
Author: Olivier Tilloy <olivier.tilloy@canonical.com>
Bug-Ubuntu: https://launchpad.net/bugs/1718885

--- a/src/chrome/BUILD.gn
+++ b/src/chrome/BUILD.gn
@@ -337,6 +337,8 @@ if (!is_android && !is_mac) {
           "//ui/base",
         ]
       }
+
+      configs += [ "//build/config/gcc:rpath_for_built_shared_libraries" ]
     }
 
     if (is_chromeos_ash || is_win) {
--- a/src/tools/v8_context_snapshot/BUILD.gn
+++ b/src/tools/v8_context_snapshot/BUILD.gn
@@ -111,6 +111,10 @@ if (use_v8_context_snapshot) {
         "//v8",
       ]
 
+      if (is_linux) {
+        configs += [ "//build/config/gcc:rpath_for_built_shared_libraries" ]
+      }
+
       configs += [
         "//v8:external_startup_data",
         ":disable_icf",
--- a/src/components/nacl/loader/BUILD.gn
+++ b/src/components/nacl/loader/BUILD.gn
@@ -113,6 +113,7 @@ if ((is_linux || is_chromeos) && current
       "nacl_helper_linux.h",
     ]
 
+    configs += [ "//build/config/gcc:rpath_for_built_shared_libraries" ]
     deps = [
       ":loader",
       "//base",
