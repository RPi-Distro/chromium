description: clang-11 doesn't support -ffile-compilation-dir, -fuse-ctor-homing, or -Wno-unused-but-set-variable
author: Andres Salomon <dilinger@debian.org>

Index: chromium-96.0.4664.110/build/config/compiler/BUILD.gn
===================================================================
--- chromium-96.0.4664.110.orig/build/config/compiler/BUILD.gn
+++ chromium-96.0.4664.110/build/config/compiler/BUILD.gn
@@ -1269,7 +1269,8 @@ config("compiler_deterministic") {
     } else {
       # -ffile-compilation-dir is an alias for both -fdebug-compilation-dir=
       # and -fcoverage-compilation-dir=.
-      cflags += [ "-ffile-compilation-dir=." ]
+      #cflags += [ "-ffile-compilation-dir=." ]
+      cflags += [ "-fdebug-compilation-dir=." ]
     }
     if (!is_win) {
       # We don't use clang -cc1as on Windows (yet? https://crbug.com/762167)
@@ -1687,8 +1687,6 @@ config("no_chromium_code") {
     ]
     if (!is_nacl && (current_toolchain == host_toolchain || !use_xcode_clang)) {
       cflags += [
-        # Disabled for similar reasons as -Wunused-variable.
-        "-Wno-unused-but-set-variable",
 
         # TODO(https://crbug.com/1202159): Clean up and enable.
         "-Wno-misleading-indentation",
@@ -2338,7 +2339,6 @@ config("symbols") {
       # by emitting class type info only when constructors are emitted.
       cflags += [
         "-Xclang",
-        "-fuse-ctor-homing",
       ]
     }
   }
